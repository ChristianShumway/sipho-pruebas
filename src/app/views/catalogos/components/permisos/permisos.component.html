<mat-card *ngIf="menu; else loading">
  <mat-tab-group>
    <mat-tab label="MenÃº">
      <!--acordion-->
      <mat-accordion>

        <mat-expansion-panel class="panel-uno" (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngFor="let opcion of menu">
          <mat-expansion-panel-header>
            <mat-panel-title class="opcion-principal">
              {{opcion.name}}
            </mat-panel-title>
            <mat-panel-description>
              <!-- Type your name and age {{panelOpenState ? 'open' : 'closed'}} -->
            </mat-panel-description>
          </mat-expansion-panel-header>

          <!-- DATA FIRST SUBMENU HERE -->
          <div *ngIf="!opcion.type || opcion.type !== 'dropDown'">
            <button mat-raised-button color="primary" (click)="openModalPermisos(opcion.id)"> Permisos</button>
          </div>

          <div *ngIf="opcion.type === 'dropDown'">
            <mat-accordion>
              <mat-expansion-panel (opened)="firstSubPanelOpenState = true" (closed)="firstSubPanelOpenState = false" *ngFor="let primerSubOpcion of opcion.sub">
                <mat-expansion-panel-header>
                  <mat-panel-title class="titulo-subopcion">
                    <p>{{primerSubOpcion.name}}</p>
                  </mat-panel-title>
                  <mat-panel-description>
                    <!-- Type your name and age {{firstSubPanelOpenState ? 'open' : 'closed'}} -->
                  </mat-panel-description>
                </mat-expansion-panel-header>
                <!-- DATA SECOND SUBMENU HERE -->
                <div *ngIf="!primerSubOpcion.type || primerSubOpcion.type !== 'dropDown'">
                  <button mat-raised-button color="primary" (click)="openModalPermisos(primerSubOpcion.id)">Permisos</button>
                </div>
                <div *ngIf="primerSubOpcion.type === 'dropDown'">
                  <mat-accordion>
                    <mat-expansion-panel (opened)="secondSubPanelOpenState = true" (closed)="secondSubPanelOpenState = false" *ngFor="let segundoSubOpcion of primerSubOpcion.sub">
                      <mat-expansion-panel-header>
                        <mat-panel-title class="titulo-subopcion">
                          <p> {{segundoSubOpcion.name}} </p>
                        </mat-panel-title>
                        <mat-panel-description>
                          <!-- Type your name and age {{secondSubPanelOpenState ? 'open' : 'closed'}} -->
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                      <div *ngIf="!segundoSubOpcion.type || segundoSubOpcion.type !== 'dropDown'">
                        <button mat-raised-button color="primary" (click)="openModalPermisos(segundoSubOpcion.id)">Permisos</button>
                      </div>

                    </mat-expansion-panel>
                  </mat-accordion>
                </div>

              </mat-expansion-panel>
            </mat-accordion>
          </div>


        </mat-expansion-panel>

      </mat-accordion>
      <!-- /acordion -->
    </mat-tab>

    <mat-tab label="Permisos Especiales">
      <mat-accordion>
        <mat-expansion-panel class="panel-uno" (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngFor="let opcion of listaPermisosEspeciales">

          <mat-expansion-panel-header>
            <mat-panel-title class="opcion-principal">
              {{opcion.name}}
            </mat-panel-title>
          </mat-expansion-panel-header>

          <div>
            <button mat-raised-button color="primary" (click)="openModalPermisos(opcion.id)"> Permisos</button>
          </div>

        </mat-expansion-panel>

      </mat-accordion>
    </mat-tab>

  </mat-tab-group>
  <ng-template #loading>
      <div class="wrap-loading-catalog">
        <mat-spinner [diameter]="60"></mat-spinner>
      </div>
    </ng-template>
</mat-card>
